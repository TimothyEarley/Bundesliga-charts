const colorMap=new Map;function getColor(e){if(colorMap.has(e))return colorMap.get(e);{console.log("No colour predefined for "+e);const t="hsl("+getRndInteger(0,360)+",100%,50%)",a=[t,t];return colorMap.set(e,a),a}}colorMap.set("FC Bayern München",["#df2127","#ffffff"]),colorMap.set("TSG 1899 Hoffenheim",["#1c63b7"]),colorMap.set("Hertha BSC",["#005eaa","#ffffff"]),colorMap.set("Werder Bremen",["#009556"]),colorMap.set("Hannover 96",["#009822","#009822"]),colorMap.set("SC Freiburg",["#000000","#b51c28"]),colorMap.set("Eintracht Frankfurt",["#000000","#ce291f","#ffffff"]),colorMap.set("VfL Wolfsburg",["#00a300"]),colorMap.set("FC Schalke 04",["#0063aa"]),colorMap.set("FC Augsburg",["#ba3733"]),colorMap.set("Borussia Mönchengladbach",["#000000"]),colorMap.set("Bayer Leverkusen",["#e4210b","#000000"]),colorMap.set("1. FSV Mainz 05",["#e62100"]),colorMap.set("VfB Stuttgart",["#f22b1a","#ffffff"]),colorMap.set("BV Borussia Dortmund 09",["#ffe800"]),colorMap.set("Borussia Dortmund",["#ffe800"]),colorMap.set("RB Leipzig",["#e0223c"]),colorMap.set("Fortuna Düsseldorf",["#ffffff"]),colorMap.set("1. FC Nürnberg",["#ad1732"]),colorMap.set("SC Paderborn 07",["#005ea8"]),colorMap.set("1. FC Union Berlin",["#d20303","#feec83"]),colorMap.set("1. FC Köln",["#ffffff","#eb2206"]),colorMap.set("Arminia Bielefeld",["#015092","#000000"]),colorMap.set("VfL Bochum",["#005ca3","#ffffff"]),colorMap.set("SpVgg Greuther Fürth",["#009932","#ffffff"]),colorMap.set("1. FC Heidenheim 1846",["#ea3323","#1a42f5"]),colorMap.set("SV Darmstadt 98",["#1d499a","#ffffff"]),colorMap.set("Holstein Kiel",["#005497","#f7f7f7"]),colorMap.set("FC St. Pauli",["#5c4531","#f7f7f7"]);var charts=[],cache=new Map;const apiURL="https://api.openligadb.de/getmatchdata/";async function fetchWithCache(e){if(cache.has(e))return console.log("Cached: "+e),cache.get(e);{console.log("Fetching: "+e);const t=apiURL+e,a=await fetch(t),r=await a.json();return cache.set(e,r),r}}async function fetchData(e,t){const a=e+"/"+t,r=(await fetchWithCache(a)).filter(e=>e.matchIsFinished),n=groupMatchesByTeam(r.groupBy(e=>e.group.groupOrderID)),s=(n.size,sortMatchdays(n).mapValues(e=>e.reduce((e,t)=>(0==e.length?e.push(t):e.push(t+e[e.length-1]),e),[]))),o=Math.max(...r.map(e=>e.group.groupOrderID),0),i=Array.from(Array(o),(e,t)=>t+1),h=s.mapValues(e=>e.map((e,t)=>e/(3*(t+1)))),c=Array.from(Array(o),(e,t)=>{return Array.from(s.mapValues(e=>e[t])).sort((e,t)=>t[1]-e[1]).map(e=>e[0])}),l=n.mapValues((e,t)=>c.map(t=>t.indexOf(e)+1));charts.forEach(e=>{e.destroy()});const f=await createPredictions(e,t);charts.push(chartIt("pointChart",s,i,3,!1)),charts.push(chartIt("percentChart",h,i,0,!1)),charts.push(chartIt("place",l,i,0,!0)),charts.push(chartIt("prediction",f,i,0,!1))}function groupMatchesByTeam(e){const t=new Map;for([day,matchesOnDay]of e)for(match of matchesOnDay){const e=extractMatchInfo(match);e?(t.has(e.team1)||t.set(e.team1,new Map),t.get(e.team1).set(day,e.points1),t.has(e.team2)||t.set(e.team2,new Map),t.get(e.team2).set(day,e.points2)):console.log("No match data!",match)}return t}function sortMatchdays(e){return e.mapValues(e=>e.toArray().sortBy(([e,t])=>e).map(([e,t])=>t))}function extractMatchInfo(e){if(!e.matchResults[0])return{team1:e.team1.teamName,team2:e.team2.teamName};const t=e.matchResults.find(e=>"Endergebnis"==e.resultName),a=t.pointsTeam1,r=t.pointsTeam2;var n,s;return a>r?(n=3,s=0):a<r?(n=0,s=3):(n=1,s=1),{team1:e.team1.teamName,points1:n,team2:e.team2.teamName,points2:s}}function chartIt(e,t,a,r,n){const s=document.getElementById(e).getContext("2d");return new Chart(s,{type:"stripe",data:{labels:a,datasets:t.toArray().map(([e,t])=>chartTeamPoints(e,t,r,s,a.length))},options:{responsive:!0,maintainAspectRatio:!1,legend:{labels:{fontColor:"white"}},scales:{xAxes:[{gridLines:{drawOnChartArea:!1,color:"rgba(255, 255, 255, 0.16)"},ticks:{fontColor:"white"}}],yAxes:[{gridLines:{color:"rgba(255, 255, 255, 0.16)"},ticks:{max:Math.max(...t.toArray().flatMap(([e,t])=>t))+r,fontColor:"white",reverse:n}}]},tooltips:{mode:"nearest",intersect:!1}}})}function chartTeamPoints(e,t,a,r,n){const s=getColor(e);var o=window.innerWidth||document.body.clientWidth;const i=r.createLinearGradient(0,0,o,0),h=o/20;for(var c=0;c<=h;c++)i.addColorStop(c/h,s[c%s.length]),c+1<h&&i.addColorStop((c+.99)/h,s[c%s.length]);return{label:e,data:t,width:Array(100).fill(a),fill:!1,borderColor:i,backgroundColor:w3color(s[0]).toHexString()+"16",borderWidth:2,lineTension:.1,pointStyle:"point",pointRadius:3,pointHoverRadius:4,pointBorderWidth:2}}async function addSeasons(e){const t=(new Date).getFullYear();var a=t;for(0==(await fetchWithCache("bl1/"+t)).length&&(a=t-1);e.hasChildNodes();)e.removeChild(e.lastChild);for(year=a;year>=2002;year--){const t=document.createElement("option");t.value=year,t.innerHTML=year+"/"+(year+1).toString().substr(-2),t.selected=year==a,e.appendChild(t)}}var leagueSel,seasonSel;function load(){fetchData(leagueSel.value,seasonSel.value)}var toggle3=!0;async function init(){console.log("Init"),leagueSel=document.getElementById("league"),seasonSel=document.getElementById("season"),document.getElementById("toggle3").addEventListener("change",()=>{toggle3=!toggle3,charts.forEach((e,t)=>{e.update()})}),await addSeasons(seasonSel),load()}window.onload=(()=>init());const eloDivider=480;async function createPredictions(e,t){let a=[];for(let e=0;e<5;e++)a.push(...await fetchWithCache("bl1/"+(t-e))),a.push(...await fetchWithCache("bl2/"+(t-e))),a.push(...await fetchWithCache("bl3/"+(t-e)));a=a.filter(e=>e.team1.teamName&&e.team2.teamName&&e.matchResults.length>0).sortBy(e=>new Date(e.matchDateTime)).map(e=>({...extractMatchInfo(e),matchDateTime:new Date(e.matchDateTime)}));const r=new Map;for(match of a)r.set(match.team1,1e3),r.set(match.team2,1e3);const n=new Map;for(team of r.keys())n.set(team,[]);for(match of a){0!=match.points1&&1!=match.points1&&3!=match.points1&&console.log("Error: ",match);const e=getNewRating(r.get(match.team1),r.get(match.team2),match.points1),t=getNewRating(r.get(match.team2),r.get(match.team1),match.points2);r.set(match.team1,e),r.set(match.team2,t),n.get(match.team1).push({elo:e,date:match.matchDateTime}),n.get(match.team2).push({elo:t,date:match.matchDateTime})}console.table(r.toArray().sortBy(e=>-e[1]));const s=await fetchWithCache(e+"/"+t),o=s.groupBy(e=>e.group.groupOrderID).mapValues(e=>e.map(e=>new Date(e.matchDateTime)).min()),i=new Map;for(match of s){const e=match.group.groupOrderID;for(let t=1;t<=o.size;t++)if(i.has(t)||i.set(t,[]),t<e||!match.matchIsFinished){const e=predictWithHistoricElo(match,n,o.get(t));i.get(t).push(e)}else i.get(t).push(extractMatchInfo(match))}const h=new Map;for([matchDay,matchesOnMatchDay]of i){const e=matchDay-1;for(match of matchesOnMatchDay){h.has(match.team1)||h.set(match.team1,Array(i.size));const t=h.get(match.team1)[e];h.get(match.team1)[e]=(t||0)+match.points1,h.has(match.team2)||h.set(match.team2,Array(i.size));const a=h.get(match.team2)[e];h.get(match.team2)[e]=(a||0)+match.points2}}return h}function getNewRating(e,t,a){const r=3==a?1:a/2,n=Math.pow(10,t/eloDivider),s=Math.pow(10,e/eloDivider);return e+32*(r-s/(s+n))}function expectedPoints(e,t){const a=1/(1+Math.pow(10,(t-e)/eloDivider));return-8*Math.pow(a,4)+10*Math.pow(a,3)+Math.pow(a,2)}function predictWithHistoricElo(e,t,a){const r=t.get(e.team1.teamName),n=t.get(e.team2.teamName),s=r.findIndex(e=>e.date>a),o=n.findIndex(e=>e.date>a),i=s>0?r[s-1].elo:r[r.length-1].elo,h=o>0?n[o-1].elo:n[n.length-1].elo;return{team1:e.team1.teamName,team2:e.team2.teamName,points1:expectedPoints(i,h),points2:expectedPoints(h,i),isPrediction:!0}}function getRndInteger(e,t){return Math.floor(Math.random()*(t-e))+e}function w3SetColorsByAttribute(){var e,t,a;for(e=document.getElementsByTagName("*"),t=0;t<e.length;t++)(a=e[t].getAttribute("data-w3-color"))&&(e[t].style.backgroundColor=w3color(a).toRgbString())}Chart.defaults.stripe=Chart.helpers.clone(Chart.defaults.line),Chart.controllers.stripe=Chart.controllers.line.extend({draw:function(e){var t=Chart.controllers.line.prototype.draw.call(this,arguments),a=this.getMeta(),r=this.chart.chart.ctx,n=this.getScaleForId(a.yAxisID),s=n.getPixelForValue(0),o=this.getDataset().width;if(toggle3){r.save(),r.fillStyle=this.getDataset().backgroundColor,r.lineWidth=1,r.beginPath();const e=a.data[0];r.moveTo(e.x,e.y),Chart.helpers.each(a.data,(e,t)=>{const a=n.getPixelForValue(o[t])-s;r.lineTo(e._view.x,e._view.y+a)}),a.data.reverse(),Chart.helpers.each(a.data,(e,t)=>{n.getPixelForValue(o[t]);r.lineTo(e._view.x,e._view.y)}),a.data.reverse(),r.closePath(),r.fill(),r.restore()}return t}}),Array.prototype.groupBy=function(e){return this.reduce((t,a)=>{const r=e(a);return t.has(r)||t.set(r,[]),t.get(r).push(a),t},new Map)},Map.prototype.mapValues=function(e){const t=new Map;return 2==e.length?this.forEach((a,r)=>t.set(r,e(r,a))):this.forEach((a,r)=>t.set(r,e(a))),t},Map.prototype.toArray=function(){return Array.from(this.entries())},Array.prototype.sortBy=function(e){return this.sort((t,a)=>e(t)-e(a))},Array.prototype.sum=function(){let e=0;return this.forEach(t=>e+=t),e},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.max=function(){return Math.max.apply(null,this)},function(){function e(n,o){return this instanceof e?"object"==typeof n?n:(this.attachValues(function(e){var n,o,i,l,f,u,d,m,g,p,b,y=[],w=[],M=[];e=h(e.toLowerCase()),n=e.substr(0,1).toUpperCase(),o=e.substr(1),m=1,"R"!=n&&"Y"!=n&&"G"!=n&&"C"!=n&&"B"!=n&&"M"!=n&&"W"!=n||isNaN(o)||6==e.length&&-1==e.indexOf(",")||(e="ncol("+e+")");3==e.length||6==e.length||isNaN(e)||(e="ncol("+e+")");e.indexOf(",")>0&&-1==e.indexOf("(")&&(e="ncol("+e+")");if("rgb"==e.substr(0,3)||"hsl"==e.substr(0,3)||"hwb"==e.substr(0,3)||"ncol"==e.substr(0,4)||"cmyk"==e.substr(0,4)){if("ncol"==e.substr(0,4)?(4==e.split(",").length&&-1==e.indexOf("ncola")&&(e=e.replace("ncol","ncola")),i="ncol",e=e.substr(4)):"cmyk"==e.substr(0,4)?(i="cmyk",e=e.substr(4)):(i=e.substr(0,3),e=e.substr(3)),l=3,u=!1,"a"==e.substr(0,1).toLowerCase()?(l=4,u=!0,e=e.substr(1)):"cmyk"==i&&(l=4,5==e.split(",").length&&(l=5,u=!0)),e=(e=e.replace("(","")).replace(")",""),y=e.split(","),"rgb"==i){if(y.length!=l)return{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1};for(f=0;f<l;f++){if(""!=y[f]&&" "!=y[f]||(y[f]="0"),y[f].indexOf("%")>-1&&(y[f]=y[f].replace("%",""),y[f]=Number(y[f]/100),f<3&&(y[f]=Math.round(255*y[f]))),isNaN(y[f]))return{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1};parseInt(y[f])>255&&(y[f]=255),f<3&&(y[f]=parseInt(y[f])),3==f&&Number(y[f])>1&&(y[f]=1)}b={r:y[0],g:y[1],b:y[2]},1==u&&(m=Number(y[3]))}if("hsl"==i||"hwb"==i||"ncol"==i){for(;y.length<l;)y.push("0");for("hsl"!=i&&"hwb"!=i||parseInt(y[0])>=360&&(y[0]=0),f=1;f<l;f++){if(y[f].indexOf("%")>-1){if(y[f]=y[f].replace("%",""),y[f]=Number(y[f]),isNaN(y[f]))return{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1};y[f]=y[f]/100}else y[f]=Number(y[f]);Number(y[f])>1&&(y[f]=1),Number(y[f])<0&&(y[f]=0)}"hsl"==i&&(b=r(y[0],y[1],y[2]),g=Number(y[0]),p=Number(y[1])),"hwb"==i&&(b=s(y[0],y[1],y[2])),"ncol"==i&&(b=function(e,t,a){var r,n,o;if(o=e,isNaN(e.substr(0,1))){if(r=e.substr(0,1).toUpperCase(),""==(n=e.substr(1))&&(n=0),n=Number(n),isNaN(n))return!1;"R"==r&&(o=0+.6*n),"Y"==r&&(o=60+.6*n),"G"==r&&(o=120+.6*n),"C"==r&&(o=180+.6*n),"B"==r&&(o=240+.6*n),"M"==r&&(o=300+.6*n),"W"==r&&(o=0,t=1-n/100,a=n/100)}return s(o,t,a)}(y[0],y[1],y[2])),1==u&&(m=Number(y[3]))}if("cmyk"==i){for(;y.length<l;)y.push("0");for(f=0;f<l;f++){if(y[f].indexOf("%")>-1){if(y[f]=y[f].replace("%",""),y[f]=Number(y[f]),isNaN(y[f]))return{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1};y[f]=y[f]/100}else y[f]=Number(y[f]);Number(y[f])>1&&(y[f]=1),Number(y[f])<0&&(y[f]=0)}b=function(e,t,a,r){var n,s,o;return n=255-255*Math.min(1,e*(1-r)+r),s=255-255*Math.min(1,t*(1-r)+r),o=255-255*Math.min(1,a*(1-r)+r),{r:n,g:s,b:o}}(y[0],y[1],y[2],y[3]),1==u&&(m=Number(y[4]))}}else if("ncs"==e.substr(0,3))b=function(e){var t,a,r,n,s,o,i,c,l,f,u,d,m,g,p,b,y;-1==(e=(e=(e=(e=(e=h(e).toUpperCase()).replace("(","")).replace(")","")).replace("NCS","NCS ")).replace(/  /g," ")).indexOf("NCS")&&(e="NCS "+e);if(null===(e=e.match(/^(?:NCS|NCS\sS)\s(\d{2})(\d{2})-(N|[A-Z])(\d{2})?([A-Z])?$/)))return!1;if(t=parseInt(e[1],10),a=parseInt(e[2],10),"N"!=(r=e[3])&&"Y"!=r&&"R"!=r&&"B"!=r&&"G"!=r)return!1;n=parseInt(e[4],10)||0,"N"!==r?(s=1.05*t-5.25,o=a,"Y"===r&&n<=60?l=1:"Y"===r&&n>60||"R"===r&&n<=80?(i="Y"===r?n-60:n+40,l=(Math.sqrt(14884-Math.pow(i,2))-22)/100):"R"===r&&n>80||"B"===r?l=0:"G"===r&&(i=n-170,l=(Math.sqrt(33800-Math.pow(i,2))-70)/100),"Y"===r&&n<=80?c=0:"Y"===r&&n>80||"R"===r&&n<=60?(i="Y"===r?n-80+20.5:n+20+20.5,c=(104-Math.sqrt(11236-Math.pow(i,2)))/100):"R"===r&&n>60||"B"===r&&n<=80?(i="R"===r?n-60-60:n+40-60,c=(Math.sqrt(1e4-Math.pow(i,2))-10)/100):"B"===r&&n>80||"G"===r&&n<=40?(i="B"===r?n-80-131:n+20-131,c=(122-Math.sqrt(19881-Math.pow(i,2)))/100):"G"===r&&n>40&&(c=0),"Y"===r?green1=(85-.85*n)/100:"R"===r&&n<=60?green1=0:"R"===r&&n>60?(i=n-60+35,green1=(67.5-Math.sqrt(5776-Math.pow(i,2)))/100):"B"===r&&n<=60?(i=1*n-68.5,green1=(6.5+Math.sqrt(7044.5-Math.pow(i,2)))/100):"B"===r&&n>60||"G"===r&&n<=60?green1=.9:"G"===r&&n>60&&(i=n-60,green1=(90-1/8*i)/100),i=(l+green1+c)/3,f=(i-l)*(100-o)/100+l,u=(i-green1)*(100-o)/100+green1,d=(i-c)*(100-o)/100+c,m=1/(f>u&&f>d?f:u>f&&u>d?u:d>f&&d>u?d:(f+u+d)/3),p=parseInt(f*m*(100-s)/100*255,10),b=parseInt(u*m*(100-s)/100*255,10),y=parseInt(d*m*(100-s)/100*255,10),p>255&&(p=255),b>255&&(b=255),y>255&&(y=255),p<0&&(p=0),b<0&&(b=0),y<0&&(y=0)):((g=parseInt(255*(1-t/100),10))>255&&(g=255),g<0&&(g=0),p=g,b=g,y=g);return{r:p,g:b,b:y}}(e);else{for(d=!1,w=a("names"),f=0;f<w.length;f++)if(e.toLowerCase()==w[f].toLowerCase()){M=a("hexs"),d=!0,b={r:parseInt(M[f].substr(0,2),16),g:parseInt(M[f].substr(2,2),16),b:parseInt(M[f].substr(4,2),16)};break}if(0==d){for(3==(e=e.replace("#","")).length&&(e=e.substr(0,1)+e.substr(0,1)+e.substr(1,1)+e.substr(1,1)+e.substr(2,1)+e.substr(2,1)),f=0;f<e.length;f++)if(!c(e.substr(f,1)))return{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1};for(y[0]=parseInt(e.substr(0,2),16),y[1]=parseInt(e.substr(2,2),16),y[2]=parseInt(e.substr(4,2),16),f=0;f<3;f++)if(isNaN(y[f]))return{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1};b={r:y[0],g:y[1],b:y[2]}}}return t(b,m,g,p)}(n)),void(o&&(o.style.backgroundColor=this.toRgbString()))):new e(n,o)}function t(e,t,a,r){var n,s,o,i,h,c,l,f;return e?(null===t&&(t=1),n=function(e,t,a){var r,n,s,o,i,h,c,l=[];for(l[0]=e/255,l[1]=t/255,l[2]=a/255,r=l[0],n=l[0],h=0,s=0;s<l.length-1;s++)l[s+1]<=r&&(r=l[s+1]),l[s+1]>=n&&(n=l[s+1],h=s+1);0==h&&(c=(l[1]-l[2])/(n-r));1==h&&(c=2+(l[2]-l[0])/(n-r));2==h&&(c=4+(l[0]-l[1])/(n-r));isNaN(c)&&(c=0);(c*=60)<0&&(c+=360);o=(r+n)/2,i=r==n?0:o<.5?(n-r)/(n+r):(n-r)/(2-n-r);return{h:c,s:i=i,l:o}}(e.r,e.g,e.b),s=function(e,t,a){var r,n,s;e/=255,t/=255,a/=255,max=Math.max(e,t,a),min=Math.min(e,t,a),chroma=max-min,r=0==chroma?0:e==max?(t-a)/chroma%6*360:t==max?((a-e)/chroma+2)%6*360:((e-t)/chroma+4)%6*360;return n=min,s=1-max,{h:r,w:n,b:s}}(e.r,e.g,e.b),o=function(e,t,a){var r,n,s,o;e/=255,t/=255,a/=255,max=Math.max(e,t,a),1==(o=1-max)?(r=0,n=0,s=0):(r=(1-e-o)/(1-o),n=(1-t-o)/(1-o),s=(1-a-o)/(1-o));return{c:r,m:n,y:s,k:o}}(e.r,e.g,e.b),c=a||n.h,l=r||n.s,i=function(e){for(;e>=360;)e-=360;if(e<60)return"R"+e/.6;if(e<120)return"Y"+(e-60)/.6;if(e<180)return"G"+(e-120)/.6;if(e<240)return"C"+(e-180)/.6;if(e<300)return"B"+(e-240)/.6;if(e<360)return"M"+(e-300)/.6}(c),h={red:e.r,green:e.g,blue:e.b,hue:c,sat:l,lightness:n.l,whiteness:s.w,blackness:s.b,cyan:o.c,magenta:o.m,yellow:o.y,black:o.k,ncol:i,opacity:t,valid:!0},(f=h).red=Number(f.red.toFixed(0)),f.green=Number(f.green.toFixed(0)),f.blue=Number(f.blue.toFixed(0)),f.hue=Number(f.hue.toFixed(0)),f.sat=Number(f.sat.toFixed(2)),f.lightness=Number(f.lightness.toFixed(2)),f.whiteness=Number(f.whiteness.toFixed(2)),f.blackness=Number(f.blackness.toFixed(2)),f.cyan=Number(f.cyan.toFixed(2)),f.magenta=Number(f.magenta.toFixed(2)),f.yellow=Number(f.yellow.toFixed(2)),f.black=Number(f.black.toFixed(2)),f.ncol=f.ncol.substr(0,1)+Math.round(Number(f.ncol.substr(1))),f.opacity=Number(f.opacity.toFixed(2)),h=f):{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1}}function a(e){return"names"==e?["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"]:"hexs"==e?["f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","000000","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"]:void 0}function r(e,t,a){var r,s;return e/=60,{r:255*n(r=2*a-(s=a<=.5?a*(t+1):a+t-a*t),s,e+2),g:255*n(r,s,e),b:255*n(r,s,e-2)}}function n(e,t,a){return a<0&&(a+=6),a>=6&&(a-=6),a<1?(t-e)*a+e:a<3?t:a<4?(t-e)*(4-a)+e:e}function s(e,t,a){var n,s,o,i=[];for(s=r(e,1,.5),i[0]=s.r/255,i[1]=s.g/255,i[2]=s.b/255,(o=t+a)>1&&(t=Number((t/o).toFixed(2)),a=Number((a/o).toFixed(2))),n=0;n<3;n++)i[n]*=1-t-a,i[n]+=t,i[n]=Number(255*i[n]);return{r:i[0],g:i[1],b:i[2]}}function o(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function h(e){return e.replace(/^\s+|\s+$/g,"")}function c(e){return"0123456789ABCDEFabcdef".indexOf(e)>-1}e.prototype={toRgbString:function(){return"rgb("+this.red+", "+this.green+", "+this.blue+")"},toRgbaString:function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.opacity+")"},toHwbString:function(){return"hwb("+this.hue+", "+Math.round(100*this.whiteness)+"%, "+Math.round(100*this.blackness)+"%)"},toHwbStringDecimal:function(){return"hwb("+this.hue+", "+this.whiteness+", "+this.blackness+")"},toHwbaString:function(){return"hwba("+this.hue+", "+Math.round(100*this.whiteness)+"%, "+Math.round(100*this.blackness)+"%, "+this.opacity+")"},toHslString:function(){return"hsl("+this.hue+", "+Math.round(100*this.sat)+"%, "+Math.round(100*this.lightness)+"%)"},toHslStringDecimal:function(){return"hsl("+this.hue+", "+this.sat+", "+this.lightness+")"},toHslaString:function(){return"hsla("+this.hue+", "+Math.round(100*this.sat)+"%, "+Math.round(100*this.lightness)+"%, "+this.opacity+")"},toCmykString:function(){return"cmyk("+Math.round(100*this.cyan)+"%, "+Math.round(100*this.magenta)+"%, "+Math.round(100*this.yellow)+"%, "+Math.round(100*this.black)+"%)"},toCmykStringDecimal:function(){return"cmyk("+this.cyan+", "+this.magenta+", "+this.yellow+", "+this.black+")"},toNcolString:function(){return this.ncol+", "+Math.round(100*this.whiteness)+"%, "+Math.round(100*this.blackness)+"%"},toNcolStringDecimal:function(){return this.ncol+", "+this.whiteness+", "+this.blackness},toNcolaString:function(){return this.ncol+", "+Math.round(100*this.whiteness)+"%, "+Math.round(100*this.blackness)+"%, "+this.opacity},toName:function(){var e,t,r,n=a("hexs");for(i=0;i<n.length;i++)if(e=parseInt(n[i].substr(0,2),16),t=parseInt(n[i].substr(2,2),16),r=parseInt(n[i].substr(4,2),16),this.red==e&&this.green==t&&this.blue==r)return a("names")[i];return""},toHexString:function(){return"#"+o(this.red)+o(this.green)+o(this.blue)},toRgb:function(){return{r:this.red,g:this.green,b:this.blue,a:this.opacity}},toHsl:function(){return{h:this.hue,s:this.sat,l:this.lightness,a:this.opacity}},toHwb:function(){return{h:this.hue,w:this.whiteness,b:this.blackness,a:this.opacity}},toCmyk:function(){return{c:this.cyan,m:this.magenta,y:this.yellow,k:this.black,a:this.opacity}},toNcol:function(){return{ncol:this.ncol,w:this.whiteness,b:this.blackness,a:this.opacity}},isDark:function(e){var t=e||128;return(299*this.red+587*this.green+114*this.blue)/1e3<t},saturate:function(e){var a,n;a=e/100||.1,this.sat+=a,this.sat>1&&(this.sat=1),n=t(r(this.hue,this.sat,this.lightness),this.opacity,this.hue,this.sat),this.attachValues(n)},desaturate:function(e){var a,n;a=e/100||.1,this.sat-=a,this.sat<0&&(this.sat=0),n=t(r(this.hue,this.sat,this.lightness),this.opacity,this.hue,this.sat),this.attachValues(n)},lighter:function(e){var a,n;a=e/100||.1,this.lightness+=a,this.lightness>1&&(this.lightness=1),n=t(r(this.hue,this.sat,this.lightness),this.opacity,this.hue,this.sat),this.attachValues(n)},darker:function(e){var a,n;a=e/100||.1,this.lightness-=a,this.lightness<0&&(this.lightness=0),n=t(r(this.hue,this.sat,this.lightness),this.opacity,this.hue,this.sat),this.attachValues(n)},attachValues:function(e){this.red=e.red,this.green=e.green,this.blue=e.blue,this.hue=e.hue,this.sat=e.sat,this.lightness=e.lightness,this.whiteness=e.whiteness,this.blackness=e.blackness,this.cyan=e.cyan,this.magenta=e.magenta,this.yellow=e.yellow,this.black=e.black,this.ncol=e.ncol,this.opacity=e.opacity,this.valid=e.valid}},window.w3color=e}();